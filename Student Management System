def calculate_grade(marks):
    avg = sum(marks) / len(marks)
    if avg >= 90:
        grade = "A"
    elif avg >= 80:
        grade = "B"
    elif avg >= 70:
        grade = "C"
    elif avg >= 60:
        grade = "D"
    else:
        grade = "Fail"
    return avg, grade


def add_student():
    name = input("Enter student name: ")
    roll_no = input("Enter roll number: ")
    marks = []
    for i in range(1, 4):
        marks.append(int(input(f"Enter marks of subject {i}: ")))

    avg, grade = calculate_grade(marks)
    record = {
        "Name": name,
        "RollNo": roll_no,
        "Marks": marks,
        "Average": avg,
        "Grade": grade
    }

    with open("students.txt", "a") as f:
        f.write(str(record) + "\n")
    print("Student record added successfully!\n")


def view_students():
    try:
        with open("students.txt", "r") as f:
            lines = f.readlines()
            for line in lines:
                print(line.strip())
    except FileNotFoundError:
        print("No student records found!\n")


def search_student():
    roll_no = input("Enter Roll No to search: ")
    found = False
    try:
        with open("students.txt", "r") as f:
            for line in f:
                record = eval(line.strip())  # converting string back to dict
                if record["RollNo"] == roll_no:
                    print("Student Found:", record)
                    found = True
                    break
        if not found:
            print("Student not found!\n")
    except FileNotFoundError:
        print("No student records found!\n")


def student_management_system():
    while True:
        print("\n--- Student Management System ---")
        print("1. Add Student")
        print("2. View Students")
        print("3. Search Student by Roll No")
        print("4. Exit")
        choice = input("Enter choice: ")

        if choice == "1":
            add_student()
        elif choice == "2":
            view_students()
        elif choice == "3":
            search_student()
        elif choice == "4":
            break
        else:
            print("Invalid choice! Try again.")



